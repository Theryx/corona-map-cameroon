<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1,shrink-to-fit=no"
    />

    <title>CORONA MAP CAMEROON</title>
    <link rel="stylesheet" href="src/css/styles.css" />
    <link rel="stylesheet" href="src/leaflet.css" />
    <link rel="stylesheet" href="src/css/bootstrap-grid.min.css" />
    <link rel="stylesheet" href="src/css/bootstrap.min.css" />
    <link rel="stylesheet" href="src/plugins/Control.MiniMap.css" />
    <link rel="stylesheet" href="src/plugins/L.Control.Sidebar.css" />
    <link rel="stylesheet" href="src/plugins/easy-button.css" />
    <link rel="stylesheet" href="src/css/font-awesome.min.css" />
    <link rel="stylesheet" href="src/plugins/leaflet.awesome-markers.css" />
    <link rel="stylesheet" href="src/plugins/MarkerCluster.css" />
    <link rel="stylesheet" href="src/plugins/MarkerCluster.Default.css" />

    <!--  <script src="src/plugins/ajax.js"></script> -->
    <script src="src/leaflet-src.js"></script>
    <script src="src/jquery-3.2.0.min.js"></script>
    <script src="src/plugins/Control.MiniMap.js"></script>
    <script src="src/plugins/leaflet-providers.js"></script>
    <script src="src/plugins/L.Control.Sidebar.js"></script>
    <script src="src/plugins/easy-button.js"></script>
    <script src="src/plugins/leaflet.awesome-markers.min.js"></script>
    <script src="src/plugins/leaflet.markercluster.js"></script>
    <script src="src/js/bootstrap.min.js"></script>
    <script>
      function isMobile() {
        if (
          /Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(
            navigator.userAgent
          )
        ) {
          return true;
        } else {
          return false;
        }
      }

      if (isMobile()) {
        window.location.href = "../m.dashboard/corona.html";
      }
    </script>

    <style>
      /* popups */

      .leaflet-popup {
        position: absolute;
        text-align: center;
        margin-bottom: 20px;
      }

      .leaflet-popup-content-wrapper {
        padding: 1px 0px;
        text-align: left;
        border-radius: 12px;
      }

      .leaflet-popup-content {
        margin: 4px 8px;
        line-height: 1.4;
      }

      .popup-content {
        border-top: 1px solid #c4c4c4;
        border-bottom: 1px solid #c4c4c4;
      }

      .leaflet-popup-content-wrapper,
      .leaflet-popup-tip {
        background: #ececec;
        color: #333;
        box-shadow: 0 3px 14px rgba(0, 0, 0, 0.4);
      }

      .card-header {
        background-color: #1e1e1e;
      }

      .titre {
        color: #ffff;
      }
    </style>
  </head>

  <body>
    <img id="navimg1" src="img/corona.png" alt="" />
    <img id="navimg2" src="img/corona.png" alt="" />
    <img id="navimg3" src="img/corona.png" alt="" />
    <img id="navimg4" src="img/corona.png" alt="" />
    <div class="my-container">
      <!------------------- Navigation bar top(titlte)+ images----------------------->
      <nav class="navbar" id="navbartop">
        <div class="proj-tittle">
          <span>2019-ncov</span>
          <span>COVID-19 </span>
          <span>Nouveau Corona virus</span>
          <span>Geo-response</span>
        </div>
        <div class="tittle-wrapper">
          <div class="nav-tittle">
            <h2 class="">
              <spam
                >Covid-19 : Evolution de la maladie sur le territoire
                camerounais</spam
              >
            </h2>
            <h5 class="">
              <spam
                >En vue de prévoir une meilleure réponse pour stopper la
                pandémie</spam
              >
            </h5>
          </div>
        </div>
      </nav>
      <!----------x--------- Navigation bar top(titlte)+ images------------x----------->

      <!------------------------------------- Main-------------------------------------->
      <main class="wrapper">
        <!------------------------------------- Left Side bar --------------------------------->
        <div class="right-side">
          <nav id="sidebarleft">
            <div class="row sidebar-header">
              <div class="division col-sm-4 threeboxes">
                <div class="row tot-fig">
                  <div id="case" class="case col-sm-12 casetot">
                    00
                  </div>
                  <div class="col-sm-12">
                    <h6>Cas</h6>
                  </div>
                </div>
              </div>

              <div class="division col-sm-4 threeboxes">
                <div class="row tot-fig">
                  <div id="victim" class="victim col-sm-12 victimtot">
                    00
                  </div>
                  <div class="col-sm-12">
                    <h6>Victimes</h6>
                  </div>
                </div>
              </div>
              <div class="division col-sm-4 threeboxes">
                <div class="row tot-fig">
                  <div id="recover" class="recover col-sm-12 recovertot">
                    00
                  </div>
                  <div class="col-sm-12">
                    <h6>
                      Rétablis
                    </h6>
                  </div>
                </div>
              </div>
            </div>
            <div id="accordion">
              <div class="card">
                <div class="card-header">
                  <a
                    class="card-link collapsed"
                    data-toggle="collapse"
                    href="#centre"
                    aria-expanded="false"
                  >
                    CENTRE:
                  </a>
                  <span id="C_centre" class="case"> 00</span>
                  <span id="V_centre" class="victim"> 00</span>
                  <span id="R_centre" class="recover"> 00</span>
                </div>
                <div id="centre" class="collapse" data-parent="#accordion">
                  <div id="table_centre" class="card-body">
                    <ul class="nav flex-column sub-menu">
                      <li class="nav-item">
                        <a class="nav-link" href="#"
                          >Chargement des départements affectés ...</a
                        >
                      </li>
                    </ul>
                  </div>
                </div>
              </div>

              <div class="card">
                <div class="card-header">
                  <a
                    class="card-link collapsed"
                    data-toggle="collapse"
                    href="#littoral"
                    aria-expanded="false"
                  >
                    LITTORAL:
                  </a>
                  <span id="C_littoral" class="case"> 00</span>
                  <span id="V_littoral" class="victim"> 00</span>
                  <span id="R_littoral" class="recover"> 00</span>
                </div>
                <div id="littoral" class="collapse" data-parent="#accordion">
                  <div id="table_littoral" class="card-body">
                    <ul class="nav flex-column sub-menu">
                      <li class="nav-item">
                        <a class="nav-link" href="#"
                          >Chargement des départements affectés ...</a
                        >
                      </li>
                    </ul>
                  </div>
                </div>
              </div>

              <div class="card">
                <div class="card-header">
                  <a
                    class="card-link collapsed"
                    data-toggle="collapse"
                    href="#ouest"
                    aria-expanded="false"
                  >
                    OUEST:
                  </a>
                  <span id="C_ouest" class="case"> 00</span>
                  <span id="V_ouest" class="victim"> 00</span>
                  <span id="R_ouest" class="recover"> 00</span>
                </div>
                <div id="ouest" class="collapse" data-parent="#accordion">
                  <div id="table_ouest" class="card-body">
                    Chargement des départements affectés ...
                  </div>
                </div>
              </div>

              <div class="card">
                <div class="card-header">
                  <a
                    class="card-link collapsed"
                    data-toggle="collapse"
                    href="#sudouest"
                    aria-expanded="false"
                  >
                    SUD-OUEST:
                  </a>
                  <span id="C_sudouest" class="case"> 00</span>
                  <span id="V_sudouest" class="victim"> 00</span>
                  <span id="R_sudouest" class="recover"> 00</span>
                </div>
                <div id="sudouest" class="collapse" data-parent="#accordion">
                  <div id="table_sudouest" class="card-body">
                    Chargement des départements affectés ...
                  </div>
                </div>
              </div>

              <div class="card">
                <div class="card-header">
                  <a
                    class="card-link collapsed"
                    data-toggle="collapse"
                    href="#sud"
                    aria-expanded="false"
                  >
                    SUD:
                  </a>
                  <span id="C_sud" class="case"> 00</span>
                  <span id="V_sud" class="victim"> 00</span>
                  <span id="R_sud" class="recover"> 00</span>
                </div>
                <div id="sud" class="collapse" data-parent="#accordion">
                  <div id="table_sud" class="card-body">
                    Chargement des départements affectés ...
                  </div>
                </div>
              </div>

              <div class="card">
                <div class="card-header">
                  <a
                    class="card-link collapsed"
                    data-toggle="collapse"
                    href="#est"
                    aria-expanded="false"
                  >
                    EST:
                  </a>
                  <span id="C_est" class="case"> 00</span>
                  <span id="V_est" class="victim"> 00</span>
                  <span id="R_est" class="recover"> 00</span>
                </div>
                <div id="est" class="collapse" data-parent="#accordion">
                  <div id="table_est" class="card-body">
                    Chargement des départements affectés ...
                  </div>
                </div>
              </div>
            </div>
          </nav>
          <div class="graph">
            <h3>GRAPH HERE</h3>
          </div>
        </div>
        <!----------------x--------------------- Left Side bar -----------------x---------------->

        <!-------------------------------------- map ---------------------------------------------------->
        <div id="mapdiv"></div>

        <!-------------------------------------x------- map ---------------------------------x--------->
        <!-------------------------- Right Bar -------------------------->
        <nav id="sidebarRight">
          <!-- <section class="Graph">
              <div>
                Lorem ipsum dolor sit amet
                consectetur adipisicing elit.
                Eveniet accusamus modi possimus
                necessitatibus. Tempore quod
                hic mollitia blanditiis eaque vitae?
              </div>
            </section>
            <section class="actualite">
                  <h5 class=titre> RUBRIQUE ACTUALITE</h5>
                  <p>
                      <h5 class=titre>Covid-19</h5>
                  </p>
                  <p> Le Covid-19 est une maladie causée par le SRAS-CoV-2, un virus appartenant à la famille des coronavirus.
                      Très fréquents, ils peuvent bien provoquer un simple rhume comme une grave infection respiratoire de type pneumonie,
                      à l’origine d’épidémies mortelles comme celles du SRAS, du Mers, et maintenant du Covid-19. </p>
                  <p>
                      <h5 class=titre>Mode de transmission </h5>
                  </p>
                  <p>Une espèce ("réservoir") héberge un virus sans être malade et le transmet à une autre espèce, qui le transmet ensuite à l'homme.
                      Dans les cas du SRAS-CoV-2, l'animal réservoir est la chauve-souris. Comme l’explique l’Inserm, « le virus est asymptomatique chez cet animal.
                      Un hôte intermédiaire est donc nécessaire à la transmission de ces virus à l’homme… ».
                      Dans le cas du SRAS-CoV-2, le pangolin pourrait être l’hôte intermédiaire et
                      le vecteur de transmission du virus à l’homme. </p>
                  <p>Les coronavirus se transmettent non seulement de l’animal à l’homme, mais également de l’homme à l’homme.
                      En ce qui concerne la maladie du Covid-19, (anciennement appelée 2019-nCoV) due au SRAS-CoV-2,
                      celle-ci se transmet par les postillons (gouttelettes de salive) projetés en toussant ou en éternuant. </P>
                  <p>Un des facteurs de transmission les plus importants semble être le contact des mains avec des surfaces infectées puis avec la bouche,
                      le nez ou les yeux. En fonction des températures et du taux d'humidité, le virus peut survivre quelques heures, voire quelques jours,
                      sur diverses surfaces si elles ne sont pas désinfectées. Des études sont en cours pour préciser ces données. </P>
                  <p>
                      <h5 class=titre>Symptômes Covid-19</h5>
                  </p>
                  <p>Les symptômes les plus courants du virus sont une forte fièvre (supérieure à 37,5°C) et une toux sèche ou grasse.
                      Certaines personnes peuvent également souffrir de courbatures, de maux de tête, d’une sensation d'oppression ou d’essoufflement.
                      Ces symptômes évoquent une infection respiratoire aiguë. Moins fréquents,
                      la perte brutale de l’odorat et la perte du goût peuvent également présager de la maladie.</P>
                  <p>Dans les cas plus graves, l'infection peut en effet provoquer " une détresse respiratoire,
                      une insuffisance rénale aiguë, voire une défaillance multiviscérale pouvant entraîner la mort", indique la communauté scientifique.
                      Les difficultés respiratoires peuvent survenir après quelques jours de maladie et ce alors même que les premiers symptômes étaient bénins.
                      Par ailleurs, certains patients présentent une forme asymptomatique du virus :
                      ils sont porteurs du virus, sans en déclarer les symptômes, mais ils sont contagieux et peuvent le transmettre.</P>
                  <p>
                      <h5 class=titre>Comment se protéger et protéger les autres</h5>
                  </p>
                  <p>Il est essentiel d'éviter de se toucher les yeux, le nez ou la bouche (qui sont des portes d'entrée
                      possibles du virus dans votre organisme) avec des mains sales. Les mesures dites "barrières" sont donc indispensables pour limiter l'impact du virus, notamment :
                      se laver fréquemment les mains avec du savon ou du gel hydroalcoolique,
                      éternuer et tousser dans son coude, utiliser des mouchoirs à usage unique, ne pas se serrer la main, ne pas faire la bise pour dire bonjour…</P>
                  <p>Le Ministre de la Santé Publique recommande le port de masque que l’on présente ou pas des symptômes de la maladie.
                      Toutefois, le meilleur moyen de s’en prémunir demeure de rester chez soi le plus longtemps possible,
                      et de ne sortir que si cela est réellement nécessaire.</P>
                  <p>
                      <h5 class=titre>Traitement</h5>
                  </P>
                  <p>Compte tenu des spécificités du Covid-19 (nouveau et spécifique), les vaccins contre la pneumonie ne protègent malheureusement pas contre le
                      coronavirus. De ce fait, il faut élaborer un vaccin qui lui est propre. Des dizaines d’essais cliniques sont actuellement en cours et des tests sont
                      également menés pour évaluer l’efficacité de certains vaccins dans la lutte contre le nouveau coronavirus. En temps normal, le cycle de développement d’un vaccin prend plusieurs années.
                      Toutefois dans le contexte actuel, les entreprises accélèrent le rythme de leurs recherches et raccourcissent les délais de mise au point.</P>
                  <p>Le traitement contre le nouveau coronavirus est dit symptomatique (il vise à soulager les symptômes) :
                      médicaments contre la fièvre (paracétamol)… Dans les formes sévères, les personnes malades peuvent recevoir des
                      antibiotiques lorsqu'une co-infection bactérienne est présente,
                      ou être mises sous assistance respiratoire…</P>
                  <p>Dans le cas de l’urgence sanitaire, certains gouvernements ont autorisé la prescription d’hydroxychloroquine, un antipaludique,
                      comme médicament contre le Covid-19. Cependant, Les médecins engageront leur responsabilité en prescrivant ce médicament aux patients
                      souffrant de formes graves du Covid-19. La délivrance d’un traitement associant lopinavir et ritonavir est également autorisée. </P>
                  <p>Cependant, l’usage d’anti-inflammatoires reste fortement déconseillé pour débuter un traitement,
                      ou d’aspirine car pourrait aggraver l’état de santé des personnes atteintes du coronavirus. Toutefois,
                      il reste fortement conseiller de prendre l’avis d’un médecin.</P>
                  <p>
                      <h5 class=titre>Demander une assistance</h5>
                  </P>
                  <P>
                      <p>Lorsque vous redoutez d’avoir les symptômes du Covid-19, appeler au 1510 et vous serrez reçu par le standard du Ministère de la Santé
                          Public qui saura vous orienter dans votre processus de consultation et mise en hospitalisation si nécessaire ; et le cas échéant,
                          il saura quel protocole mettre en place pour encadrer le cas d’infection de votre domicile au centre hospitalier agrée...
                          Il est recommandé de ne pas sortir de chez vous de peur de contaminer d’autres personnes sur votre trajet.</P>

                          </section> -->
        </nav>
        <!------------x-------------- Right Bar -------------x------------->
        <!-------------------------- icon menu -------------------------->
        <div class="menu-containers">
          <button class="icon-box">
            <i id="searchicon" class="fa fa-plus fa-2x"></i>
            <i id="searchicon" class="fa fa-search fa-2x"></i>
          </button>
        </div>

        <!------------x-------------- icon menu -------------------------->
      </main>
      <!-------------------x------------------ Main-------------------x------------------->

      <div class="footer d-flex justify-content-center">
        <b> Copyright © Mars 2020</b>
      </div>
    </div>
    <script>
      // $(document).ready(function () {
      //   $(".btn-toggle-close").click(function () {
      //     $("#sidebarRight").hide(100);
      //     $(".wrapper").css("grid-template-columns", "25% 75%");
      //     $(".btn-toggle-open").css("display", "inline");
      //     $("#toggleIcon").css("transform", "rotate(270deg)");
      //   });
      //   $(".btn-toggle-open").click(function () {
      //     $("#sidebarRight").show(100);
      //     $(".wrapper").css("grid-template-columns", "25% 55% 20%");
      //     $(".btn-toggle-close").css("display", "inline");
      //     $(".btn-toggle-open").css("display", "none");
      //   });
      // });

      var mymap;
      var lyrOSM;
      var miniMap;
      var ctlLayers;
      var bounds;
      var southWest_bnd;
      var northEast_bnd;
      var objBasemaps;
      var objOverlays;
      var lyrImageryEsri;
      var lyrOSM2;
      var lyrImageryEsri_gray;
      var lyrImageryGoogle;
      var lyrMarkerCluster;
      var ctlsidebar;
      var ctleasybutton;

      //couches vecteurs
      var lyrregion;
      var lyrclinique;
      var lyrquartier;
      var lyrhotel;
      var lyrhopitaux;
      var lyrpolice;
      var lyrpharmacie;

      //icones marqueurs
      var icnLAMclinique;
      var icnLAMhotel;
      var icnLAMhopitaux;
      var icnLAMpolice;
      var icnLAMpharmacie;

      //styles couches polygones
      var Stylequartier = {
        color: "black",
        weight: 3,
        fillOpacity: 0,
      };

      var Styleregion = {
        color: "#845500",
        weight: 3,
        fillOpacity: 0.1,
        fillColor: "#845500",
      };

      var Styleregion_case = {
        color: "red",
        weight: 3,
        fillOpacity: 0.1,
        fillColor: "red",
      };

      $(document).ready(function () {
        //non cartographique
        //Mise à jour données régions

        $.getJSON("php/centre_sum.php", function (data) {
          var datas = [];
          $.each(data, function (key, val) {
            datas.push(val);
          });
          $("#C_centre").html(datas[0]);
          $("#V_centre").html(datas[1]);
          $("#R_centre").html(datas[2]);
        });

        $.getJSON("php/littoral_sum.php", function (data) {
          var datas = [];
          $.each(data, function (key, val) {
            datas.push(val);
          });
          $("#C_littoral").html(datas[0]);
          $("#V_littoral").html(datas[1]);
          $("#R_littoral").html(datas[2]);
        });

        $.getJSON("php/ouest_sum.php", function (data) {
          var datas = [];
          $.each(data, function (key, val) {
            datas.push(val);
          });
          $("#C_ouest").html(datas[0]);
          $("#V_ouest").html(datas[1]);
          $("#R_ouest").html(datas[2]);
        });

        $.getJSON("php/sudouest_sum.php", function (data) {
          var datas = [];
          $.each(data, function (key, val) {
            datas.push(val);
          });
          $("#C_sudouest").html(datas[0]);
          $("#V_sudouest").html(datas[1]);
          $("#R_sudouest").html(datas[2]);
        });

        $.getJSON("php/sud_sum.php", function (data) {
          var datas = [];
          $.each(data, function (key, val) {
            datas.push(val);
          });
          $("#C_sud").html(datas[0]);
          $("#V_sud").html(datas[1]);
          $("#R_sud").html(datas[2]);
        });

        $.getJSON("php/est_sum.php", function (data) {
          var datas = [];
          $.each(data, function (key, val) {
            datas.push(val);
          });
          $("#C_est").html(datas[0]);
          $("#V_est").html(datas[1]);
          $("#R_est").html(datas[2]);
        });

        $.getJSON("php/region_sum.php", function (data) {
          var datas = [];
          $.each(data, function (key, val) {
            datas.push(val);
          });
          $("#case").html(datas[0]);
          $("#victim").html(datas[1]);
          $("#recover").html(datas[2]);
          console.log(datas);
        });

        //Mise à jour tableau données departement
        function table_centre() {
          $.ajax({
            url: "php/table_centre.php",
            type: "POST",
            success: function (response) {
              $("#table_centre").html(response);
            },
          });
        }

        table_centre();

        function table_littoral() {
          $.ajax({
            url: "php/table_littoral.php",
            type: "POST",
            success: function (response) {
              $("#table_littoral").html(response);
            },
          });
        }

        table_littoral();

        function table_ouest() {
          $.ajax({
            url: "php/table_ouest.php",
            type: "POST",
            success: function (response) {
              $("#table_ouest").html(response);
            },
          });
        }

        table_ouest();

        function table_sudouest() {
          $.ajax({
            url: "php/table_sudouest.php",
            type: "POST",
            success: function (response) {
              $("#table_sudouest").html(response);
            },
          });
        }

        table_sudouest();

        function table_sud() {
          $.ajax({
            url: "php/table_sud.php",
            type: "POST",
            success: function (response) {
              $("#table_sud").html(response);
            },
          });
        }

        table_sud();

        function table_est() {
          $.ajax({
            url: "php/table_est.php",
            type: "POST",
            success: function (response) {
              $("#table_est").html(response);
            },
          });
        }

        table_est();

        //cartographique
        southWest_bnd = L.latLng(1, 17);
        northEast_bnd = L.latLng(16, 8);
        bounds = L.latLngBounds(southWest_bnd, northEast_bnd);

        mymap = L.map("mapdiv", {
          center: [5.659719, 13.066939],
          zoom: 6,
          maxZoom: 19,
          minZoom: 5,
          maxBounds: bounds,
        });

        lyrOSM = L.tileLayer.provider("OpenStreetMap.Mapnik");
        lyrImageryEsri = L.tileLayer.provider("Esri.WorldImagery");
        lyrOSM2 = L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png");
        lyrImageryGoogle = L.tileLayer(
          "http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",
          {
            maxzoom: 20,
            subdomains: ["mt0", "mt1", "mt2", "mt3"],
          }
        );
        lyrImageryEsri_gray = L.tileLayer(
          "https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",
          {
            attribution: "Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ",
            maxZoom: 20,
          }
        );

        miniMapCtl = new L.Control.MiniMap(lyrOSM2, {
          toggleDisplay: true,
        }).addTo(mymap);

        objBasemaps = {
          "Open Street Maps": lyrOSM,
          "Imagerie Satelitte Esri": lyrImageryEsri,
          "Esri gray": lyrImageryEsri_gray,
          "Imagerie Satelitte google": lyrImageryGoogle,
        };

        objOverlays = {};

        ctlLayers = L.control
          .layers(objBasemaps, objOverlays, {
            position: "bottomleft",
          })
          .addTo(mymap);

        //Marker icon
        icnLAMclinique = L.AwesomeMarkers.icon({
          icon: "glyphicon-plus-sign",
          markerColor: "red",
          iconColor: "white",
          prefix: "glyphicon",
        });

        icnLAMhotel = L.AwesomeMarkers.icon({
          icon: "hotel",
          markerColor: "blue",
          iconColor: "red",
          prefix: "fa",
        });

        icnLAMpolice = L.AwesomeMarkers.icon({
          icon: "glyphicon-star",
          markerColor: "orange",
          iconColor: "red",
          prefix: "glyphicon",
        });

        icnLAMhopitaux = L.AwesomeMarkers.icon({
          icon: "h-square",
          markerColor: "blue",
          iconColor: "white",
          prefix: "fa",
        });

        icnLAMpharmacie = L.AwesomeMarkers.icon({
          icon: "glyphicon-plus",
          markerColor: "white",
          iconColor: "green",
          prefix: "glyphicon",
        });

        //cluster
        lyrMarkerCluster = L.markerClusterGroup({
          disableClusteringAtZoom: 17,
        });

        function refreshclinique() {
          $.ajax({
            url: "php/load_clinique.php",
            type: "POST",
            success: function (response) {
              if (lyrclinique) {
                mymap.removeLayer(lyrclinique);
              }
              lyrclinique = L.geoJSON(JSON.parse(response), {
                pointToLayer: function (feature, latlng) {
                  return L.marker(latlng, {
                    icon: icnLAMclinique,
                  });
                },
                onEachFeature: function (feature, layer) {
                  var strbuildingInfo =
                    "<h6 style='color: brown;text-align:center;text-decoration: underline;font-weight:bold'>INFORMATIONS</h6>";
                  strbuildingInfo +=
                    "<h6> <span style='text-decoration: underline;font-weight:bold'>Nom :</span> <span style='color:blue'>" +
                    feature.properties.name +
                    " </span> </h6>";

                  layer.bindPopup(String(strbuildingInfo));
                },
              });
              lyrMarkerCluster.addLayer(lyrclinique);
            },
          });
        }

        function refreshhotel() {
          $.ajax({
            url: "php/load_hotel.php",
            type: "POST",
            success: function (response) {
              if (lyrhotel) {
                mymap.removeLayer(lyrhotel);
              }
              lyrhotel = L.geoJSON(JSON.parse(response), {
                pointToLayer: function (feature, latlng) {
                  return L.marker(latlng, {
                    icon: icnLAMhotel,
                  });
                },
                onEachFeature: function (feature, layer) {
                  var strbuildingInfo =
                    "<h6 style='color: brown;text-align:center;text-decoration: underline;font-weight:bold'>INFORMATIONS</h6>";
                  strbuildingInfo +=
                    "<h6> <span style='text-decoration: underline;font-weight:bold'>Nom :</span> <span style='color:blue'>" +
                    feature.properties.name +
                    " </span> </h6>";

                  layer.bindPopup(String(strbuildingInfo));
                },
              });
              lyrMarkerCluster.addLayer(lyrhotel);
            },
          });
        }

        function refreshpharmacie() {
          $.ajax({
            url: "php/load_pharmacie.php",
            type: "POST",
            success: function (response) {
              if (lyrpharmacie) {
                mymap.removeLayer(lyrpharmacie);
              }
              lyrpharmacie = L.geoJSON(JSON.parse(response), {
                pointToLayer: function (feature, latlng) {
                  return L.marker(latlng, {
                    icon: icnLAMpharmacie,
                  });
                },

                onEachFeature: function (feature, layer) {
                  var strbuildingInfo =
                    "<h6 style='color: brown;text-align:center;text-decoration: underline;font-weight:bold'>INFORMATIONS</h6>";
                  strbuildingInfo +=
                    "<h6> <span style='text-decoration: underline;font-weight:bold'>Nom :</span> <span style='color:blue'>" +
                    feature.properties.name +
                    " </span> </h6>";

                  layer.bindPopup(String(strbuildingInfo));
                },
              });
              lyrMarkerCluster.addLayer(lyrpharmacie);
            },
          });
        }

        function refreshphoptiaux() {
          $.ajax({
            url: "php/load_hopitaux.php",
            type: "POST",
            success: function (response) {
              if (lyrhopitaux) {
                mymap.removeLayer(lyrhopitaux);
              }
              lyrhopitaux = L.geoJSON(JSON.parse(response), {
                pointToLayer: function (feature, latlng) {
                  return L.marker(latlng, {
                    icon: icnLAMhopitaux,
                  });
                },
                onEachFeature: function (feature, layer) {
                  var strbuildingInfo =
                    "<h6 style='color: brown;text-align:center;text-decoration: underline;font-weight:bold'>INFORMATIONS</h6>";
                  strbuildingInfo +=
                    "<h6> <span style='text-decoration: underline;font-weight:bold'>Nom :</span> <span style='color:blue'>" +
                    feature.properties.name +
                    " </span> </h6> ";

                  layer.bindPopup(String(strbuildingInfo));
                },
              });
              lyrMarkerCluster.addLayer(lyrhopitaux);
            },
          });
        }

        function refreshpolice() {
          $.ajax({
            url: "php/load_police.php",
            type: "POST",
            success: function (response) {
              if (lyrpolice) {
                mymap.removeLayer(lyrpolice);
              }
              lyrpolice = L.geoJSON(JSON.parse(response), {
                pointToLayer: function (feature, latlng) {
                  return L.marker(latlng, {
                    icon: icnLAMpolice,
                  });
                },

                onEachFeature: function (feature, layer) {
                  var strbuildingInfo =
                    "<h6 style='color: brown;text-align:center;text-decoration: underline;font-weight:bold'>INFORMATIONS</h6>";
                  strbuildingInfo +=
                    "<h6> <span style='text-decoration: underline;font-weight:bold'>Nom :</span> <span style='color:blue'>" +
                    feature.properties.name +
                    " </span> </h6> ";

                  layer.bindPopup(String(strbuildingInfo));
                },
              });
              lyrMarkerCluster.addLayer(lyrpolice);
              lyrMarkerCluster.addTo(mymap);
            },
          });
        }

        function refreshregion() {
          $.ajax({
            url: "php/load_region.php",
            type: "POST",
            success: function (response) {
              if (lyrregion) {
                mymap.removeLayer(lyrregion);
              }
              lyrregion = L.geoJSON(JSON.parse(response), {
                style: function (feature) {
                  switch (feature.properties.niveau_contamination) {
                    case 0:
                      return {
                        color: "#265500",
                        weight: 2,
                        fillOpacity: 0.35,
                        fillColor: "#265500",
                      };
                    case 1:
                      return {
                        color: "#508104",
                        weight: 2,
                        fillOpacity: 0.35,
                        fillColor: "#508104",
                      };
                    case 2:
                      return {
                        color: "#9E8E01",
                        weight: 2,
                        fillOpacity: 0.35,
                        fillColor: "#9E8E01",
                      };
                    case 3:
                      return {
                        color: "#F3B800",
                        weight: 2,
                        fillOpacity: 0.35,
                        fillColor: "#F3B800",
                      };
                    case 4:
                      return {
                        color: "#DB8200",
                        weight: 2,
                        fillOpacity: 0.35,
                        fillColor: "#DB8200",
                      };
                    case 5:
                      return {
                        color: "#B64201",
                        weight: 2,
                        fillOpacity: 0.35,
                        fillColor: "#B64201",
                      };
                  }
                },
                onEachFeature: function (feature, layer) {
                  var strbuildingInfo =
                    "<div class ='popup-content'><h6 style='text-align:center;font-weight:bold'>INFORMATIONS</h6></div>";
                  strbuildingInfo +=
                    "<div class = 'popup-content'><h6> <span style='font-weight:bold'>Région :</span> <span>" +
                    feature.properties.name +
                    " </span> </h6></div>";
                  strbuildingInfo +=
                    "<div class = 'popup-content'><h6> <span style='font-weight:bold'>Population :</span> <span>" +
                    feature.properties.pop_estim_2020 +
                    " </span> </h6> </div>";
                  strbuildingInfo +=
                    "<div class = 'popup-content'><h6> <span style='font-weight:bold'>Nombre de cas:</span> <span style='color:orange'>" +
                    feature.properties.nombre_total_de_cas +
                    " </span> </h6> </div>";
                  strbuildingInfo +=
                    "<div class = 'popup-content'><h6> <span style='font-weight:bold'>Nombre de victimes:</span> <span style='color:red'>" +
                    feature.properties.nombre_de_victimes +
                    " </span> </h6> </div>";
                  strbuildingInfo +=
                    "<div class = 'popup-content'><h6> <span style='font-weight:bold'>Personnes rétablies:</span> <span style='color:green'>" +
                    feature.properties.nombre_de_personnes_retablies +
                    " </span> </h6> </div> ";

                  layer.bindPopup(String(strbuildingInfo));
                },
              });
              lyrregion.addTo(mymap);
            },
          });
        }
        refreshclinique();
        refreshregion();
        refreshhotel();
        refreshpharmacie();
        refreshphoptiaux();
        refreshpolice();

        //intergration side bar dans plugin
        ctlsidebar = L.control.sidebar("sidebar").addTo(mymap);

        // easy_bouton pour montrer ou cacher le side bar
        ctleasybutton = L.easyButton("glyphicon-transfer", function () {
          ctlsidebar.toggle();
        }).addTo(mymap);
      });
    </script>
  </body>
</html>
